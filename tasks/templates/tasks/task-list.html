{% extends 'base.html' %}
{{form.media}}
{% load poll_extras %}
{% load static %}

{% block headcontent %}
    <title>vToDo - profil użytkownika</title>
{% endblock %}

{% block content %}
<div class="wrapper"> 
<nav id="sidebar">
<nav class="sidebar main">
    <div class="sidebar-btn"><img src="{%static 'image/icons/home-icon.svg' %}"></div>
    <a href="{% url 'date' %}"><div class="sidebar-btn"><img src="{%static 'image/icons/calendar-icon.svg' %}"></div></a>
    <div class="sidebar-btn active"><img src="{%static 'image/icons/todolist-icon.svg' %}"></div>
    <div class="sidebar-btn"><img src="{%static 'image/icons/settings-icon.svg' %}"></div>
</nav>
<nav class="sidebar menu">
    <div class="header"><img src="{%static 'image/icons/todolist-dark.svg' %}"><h1>LISTA ZADAŃ</h1></div>
    <ul class="menu-buttons">
        <li class="active"><a class="active" href=#>WSZYSTKIE</a></li>
        <li><a href=#>Kategoria 1</a></li>
        <li><a href=#>Kategoria 2</a></li>
        <li><a href=#>Kategoria 3</a></li>
        <li><a href=#>+ Dodaj kategorię</a></li>
    </ul>
    </nav>
</nav>
<div id="content">
               <button class="hamburger">MENU</button>
    <nav class="navbar">
        <div class="left">

        <h1>WSZYSTKIE</h1>
        </div>
        <div class="right">
        <div class="modal fade" tabindex="-1" role="dialog" id="modal">
          <div class="modal-dialog" role="document">
            <div class="modal-content"></div>
          </div>
        </div>

        <!-- Create book button -->
        <button id="add-task" class="button add" type="button" name="button">DODAJ ZADANIE</button>
    <div class="avatar">
        <a href="{% url 'profile' %}">
        {% if user.avatar == None %}
            <img src="{%static 'image/avatar-test.png' %}" />
        {% else %}
            <img src="user.avatar"/>
        {% endif %}
            </a>
            </div>
        </div>
    </nav>
    <hr>

    

    <div class="vcontainer column">
        {% for task in tasks %}
            <div class="vcontainer">
            <div class="task">
                <input type="checkbox">
                <div class="task-content"><h1>{{task}}</h1><div class="task-info"><p id="date">{{task.date |timeuntil | split_timeuntil}}</p><p>∙</p><p>{{task.localization}}</p><p>∙</p><p>{{task.with_who}}</p></div></div>
                <div class="important-tag">
                    {% if task.priority == "H" %}
                        <img src="{%static 'image/icons/fire_H.svg'%}" width="25" height="25">
                    {% elif task.priority == "M" %}
                        <img src="{%static 'image/icons/fire_M.svg'%}" width="20" height="20">
                    {% else %}
                        <img src="{%static 'image/icons/fire_L.svg'%}" width="15" height="15">
                    {% endif %}
                </div>
            </div>
        <div class="edit"> 
            <button class="button task-edit" data-toggle="modal" data-target="#fm-modal-grid"><img src="{% static 'image/icons/edit-icon.svg'%}" alt="Edytuj"></button>
                    <button type="button" class="delete-task button task-edit" data-form-url="{% url 'delete' task.pk %}">
                          <img src="{% static 'image/icons/delete-icon.svg'%}" alt="Usuń">
        </button>
                </div>

        </div>

            {% endfor %}

    </div>
    </div>
    </div>

    <script type="text/javascript">
    $(document).ready(function() {

        $("#add-task").modalForm({
            formURL: "{% url 'add_task' %}"
        });

        $(".delete-task").each(function () {
            $(this).modalForm({formURL: $(this).data("form-url"), isDeleteForm: true});
        });
    });
    </script>
    <script src="{% static 'js/jquery.bootstrap.modal.forms.min.js' %}"></script>

{% endblock %}
